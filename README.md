# Logging Backend Skeleton

A clean, scalable Go backend skeleton built with [Gin](https://github.com/gin-gonic/gin), [Google Wire](https://github.com/google/wire), structured configuration files, and dependency injection.

---

## 🗂️ Project Structure

```
.
├── cmd
│   └── api
│       ├── main.go           # Entry point
│       ├── server.go         # Exposes InitializeServer() for runtime
│       ├── wire.go           # Wire dependency declarations (compile-time only)
│       └── wire_gen.go       # Generated by `wire`
├── config/                   # YAML configs for each subsystem
├── internal/
│   ├── common/               # Logger, middleware, utilities
│   ├── infra/                # DB, Redis clients, etc.
│   ├── domain/, service/, ... (TBD: your business logic)
├── go.mod / go.sum
└── README.md
```

---

## ⚙️ Prerequisites

- Go 1.21+
- [Wire installed](https://github.com/google/wire) (run: `go install github.com/google/wire/cmd/wire@latest`)
- Optional: `make` or shell script for automation

---

## 🧪 Quick Start

### 1. Clone and set up

```bash
git clone https://github.com/The-Innovators-DATN/logging.git
cd logging-backend
```

### 2. Initialize Wire DI

```bash
cd cmd/api
wire
```

You should now see a `wire_gen.go` file generated.

---

### 3. Run the application

```bash
CONFIG_PATH=../../config go run .
```

Or directly:

```bash
cd cmd/api
go run .
```

> 🔧 Ensure your `config/*.yaml` files exist and are correctly structured.

---

## 🧰 Configuration

All configuration is stored in the `config/` folder:

- `app.yaml` — app name, host, port
- `database.yaml` — PostgreSQL DSN
- `redis.yaml` — Redis address
- `log.yaml` — log level/output
- ...

All loaded via Viper based on the folder passed in `InitializeServer("config_path")`.

---

## ✅ Health Check

Once running, hit:

```bash
curl http://localhost:<your-port>/healthz
```

Expected response:
```json
{"status": "ok"}
```

---

## 📦 Re-generating Wire (when deps change)

```bash
cd cmd/api
wire
```

Re-run whenever you:
- Add/remove dependencies in `wire.Build(...)`
- Change constructor signatures

---

## 📌 Troubleshooting

- **`undefined: InitializeServer`**  
  → You're running `go run main.go` instead of `go run .`

- **Config file not found**  
  → Set correct relative path: `../../config` from `cmd/api`

- **Wire errors: "no provider found..."**  
  → You missed a dependency or didn't pass it down to `buildRouter(...)`

---

